<!DOCTYPE html>
<html>
<head>
  <title>Bridge Competition Manager</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
  <h1>Bridge Competition Manager</h1>
  
  <div>
    <input type="text" id="teamNameInput" placeholder="Enter Team Name">
    <input type="number" id="initialWeightInput" placeholder="Enter Initial Weight">
    <button id="addTeamButton">Add Team</button>
  </div>

  <table id="teamTable">
    <thead>
      <tr>
        <th>Team Name</th>
        <th>Initial Weight</th>
        <th>Current Score</th>
        <th>Break Point</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="teamTableBody">
      <!-- Team items will be added here -->
    </tbody>
  </table>

  <div id="chartPanel">
    <h2>Team Chart</h2>
    <div id="chart">
      <!-- Chart will be dynamically updated here -->
    </div>
  </div>

  <!-- Add a button and a div for displaying team info -->
  <button id="displayTeamInfoButton">Display Team Info</button>
  <div id="teamInfo"></div>

  <canvas id="teamChart" width="400" height="200"></canvas> <!-- Add a canvas element for the chart -->
  <canvas id="teamChart" width="400" height="200"></canvas>

  <script>
    const teamNameInput = document.getElementById('teamNameInput');
    const initialWeightInput = document.getElementById('initialWeightInput');
    const addTeamButton = document.getElementById('addTeamButton');
    const teamTableBody = document.getElementById('teamTableBody');
    const teamChart = document.getElementById('teamChart').getContext('2d'); // Get the chart context
  
    // Array to store teams
    const teams = [];
  
    // Create an initial empty chart
    let chart;
  
    // Function to add a team
    function addTeam() {
      const name = teamNameInput.value;
      const initialWeight = parseFloat(initialWeightInput.value);
  
      if (name && !isNaN(initialWeight)) {
        const team = {
          name,
          initialWeight,
          currentScore: 0,
          breakPoint: false
        };
  
        teams.push(team);
        updateTeamTable();
        updateChart();
        teamNameInput.value = '';
        initialWeightInput.value = '';
      }
    }
  
    // Function to update the team table
    function updateTeamTable() {
      teamTableBody.innerHTML = '';
      teams.forEach((team, index) => {
        const row = teamTableBody.insertRow();
        row.innerHTML = `
          <td>${team.name}</td>
          <td>${team.initialWeight}</td>
          <td>${team.currentScore}</td>
          <td>${team.breakPoint ? 'Broken' : 'Not Broken'}</td>
          <td>
            <button onclick="updateScore(${index})">Update Score</button>
            <button onclick="markAsBroken(${index})">Mark as Broken</button>
          </td>
        `;
      });
    }
  
    // Function to update the Chart.js chart
    function updateChart() {
      if (chart) {
        chart.destroy(); // Destroy the previous chart instance to prevent memory leaks
      }
  
      // Extract the team names and scores for the chart
      const labels = teams.map((team) => team.name);
      const scores = teams.map((team) => team.currentScore);
  
      // Create a new Chart.js chart
      chart = new Chart(teamChart, {
        type: 'bar', // You can choose the chart type (e.g., bar, line, pie, etc.)
        data: {
          labels: labels,
          datasets: [
            {
              label: 'Scores',
              data: scores,
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              borderColor: 'rgba(75, 192, 192, 1)',
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
        },
      });
    }
  
    // Function to update the score of a team
    function updateScore(index) {
      const addedWeight = parseFloat(prompt(`Enter weight added for ${teams[index].name}:`));
      if (!isNaN(addedWeight)) {
        teams[index].currentScore += addedWeight;
        updateTeamTable();
        updateChart();
      }
    }
  
    // Function to mark a team as broken
    function markAsBroken(index) {
      teams[index].breakPoint = true;
      updateTeamTable();
      updateChart();
    }
  
    // Event listener for the "Add Team" button
    addTeamButton.addEventListener('click', addTeam);
  </script>
  